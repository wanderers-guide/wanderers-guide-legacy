{{#section "styles"}}
  <link rel="stylesheet" href="/css/homebrew-builders.css" />
{{/section}}

{{#section "header"}}
  <script type="text/javascript" src="/js/confirm-page-leave.js"></script>
  <script
    type="text/javascript"
    src="/js/homebrew/builder/feat-action/builder-feat-action.js"
  ></script>
  {{#if featID}}
    <script
      type="text/javascript"
      src="/js/homebrew/builder/feat-action/editor-feat-action.js"
    ></script>
  {{/if}}
{{/section}}

{{#section "nav_home"}}
  <li><a href="/">Home</a></li>
{{/section}}

{{#section "nav_characters"}}
  <li class="mx-lg-4 mx-md-3 my-md-0 my-2"><a
      href="/v/profile/characters"
    >Characters</a></li>
{{/section}}

{{#section "nav_builds"}}
  <li><a href="/builds">Builds</a></li>
{{/section}}

{{#section "nav_homebrew"}}
  <li class="mx-lg-4 mx-md-3 my-md-0 my-2"><a
      href="/homebrew"
      class="active"
    >Homebrew</a></li>
{{/section}}

{{#section "nav_gm_tools"}}
  <li><a href="/gm-tools">GM Tools</a></li>
{{/section}}

{{#section "nav_browse"}}
  <li class="mx-lg-4 mx-md-3 my-md-0 my-2"><a href="/browse"><i
        class="fas fa-lg fa-search"
      ></i></a></li>
{{/section}}

{{#section "nav_login"}}
  <li class="mr-4"><a href="/auth/login">Login
      <i class="fas fa-sign-in-alt"></i></a></li>
{{/section}}

{{#section "banner_nav"}}
  <div class="banner_w3lspvt-2"></div>
{{/section}}

<div class="pageloader">
  <div class="lds-roller"><div></div><div></div><div></div><div></div><div
    ></div><div></div><div></div><div></div></div>
</div>

<div class="pt-3">
  <h1 class="title is-2 has-txt-value-number has-text-centered">Feat / Activity
    Builder</h1>
</div>

<div
  id="builder-container"
  data-user-id="{{user.id}}"
  data-bundle-id="{{bundleID}}"
  data-feat-id="{{featID}}"
  class="columns is-mobile is-centered mt-2 mb-3"
>
  <div class="column is-8 tile is-ancestor is-vertical">

    <div class="tile">

      <div class="tile is-parent is-vertical box is-marginless">

        <div class="tile is-child">
          <div class="has-text-centered is-marginless">
            <p>Use this builder to create any type of feat or basic activity.</p>
          </div>
          <div class="field is-grouped is-grouped-centered">
            <div class="control">
              <div class="select">
                <select id="inputBuilderType">
                  <option value="GENERAL-FEAT" selected>General Feat</option>
                  <option value="SKILL-FEAT">Skill Feat</option>
                  <option value="CLASS-FEAT">Class Feat</option>
                  <option value="ANCESTRY-FEAT">Ancestry Feat</option>
                  <option value="ARCHETYPE-FEAT">Archetype Feat</option>
                  <option value="BASIC-ACTION">Basic Action</option>
                  <option value="SKILL-ACTION">Skill Action</option>
                  <option value="COMPANION-ACTION">Companion Action</option>
                  <option value="CREATURE-ACTION">Creature Action</option>
                </select>
              </div>
            </div>
            <div id="sectionClassOptions" class="control is-hidden">
              <div class="select">
                <select id="inputClassOptions">
                </select>
              </div>
            </div>
            <div id="sectionAncestryOptions" class="control is-hidden">
              <div class="select">
                <select id="inputAncestryOptions">
                </select>
              </div>
            </div>
            <div id="sectionArchetypeOptions" class="control is-hidden">
              <div class="select">
                <select id="inputArchetypeOptions">
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">Name</label>
          <div class="control">
            <input
              class="input"
              id="inputFeatName"
              type="text"
              placeholder="e.g. Grim Insight"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="tile is-child columns">

          <div id="sectionSkill" class="column field">
            <label class="label">Skill</label>
            <div class="control">
              <div class="select">
                <select id="inputFeatSkill">
                  <option value="">Any</option>
                  {{#each skills}}
                    <option value="{{id}}">{{name}}</option>
                  {{/each}}
                </select>
              </div>
            </div>
          </div>

          <div id="sectionMinProf" class="column field">
            <label class="label">Min. Proficiency</label>
            <div class="control">
              <div class="select">
                <select id="inputFeatMinProf">
                  <option value="U" selected>Untrained</option>
                  <option value="T">Trained</option>
                  <option value="E">Expert</option>
                  <option value="M">Master</option>
                  <option value="L">Legendary</option>
                </select>
              </div>
            </div>
          </div>

          <div id="sectionLevel" class="column field">
            <label class="label">Level</label>
            <div class="control">
              <div class="select">
                <select id="inputFeatLevel">
                  <option value="-1">Unselectable</option>
                  <option value="1" selected>1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                </select>
              </div>
            </div>
          </div>

          <div class="column field">
            <label class="label">Actions</label>
            <div class="control">
              <div class="select">
                <select id="inputFeatActions" class="pf-icon">
                  <option value="NONE">None</option>
                  <option value="ACTION">[one-action]</option>
                  <option value="TWO_ACTIONS">[two-actions]</option>
                  <option value="THREE_ACTIONS">[three-actions]</option>
                  <option value="FREE_ACTION">[free-action]</option>
                  <option value="REACTION">[reaction]</option>
                </select>
              </div>
            </div>
          </div>

          <div class="column field">
            <label class="label">Rarity</label>
            <div class="control">
              <div class="select">
                <select id="inputFeatRarity">
                  <option value="COMMON">Common</option>
                  <option value="UNCOMMON">Uncommon</option>
                  <option value="RARE">Rare</option>
                  <option value="UNIQUE">Unique</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="tile is-child">
          <label class="label">Other Traits</label>
          <select id="inputFeatTags" data-placeholder="Select Traits" multiple>
            {{#each tags}}
              <option value="{{id}}">{{name}}</option>
            {{/each}}
          </select>
        </div>

        <div class="tile is-child field">
          <label class="label">Prerequisites</label>
          <div class="control">
            <input
              class="input"
              id="inputFeatPrereq"
              type="text"
              maxlength="290"
            />
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">Requirements</label>
          <div class="control">
            <input
              class="input"
              id="inputFeatReq"
              type="text"
              maxlength="590"
            />
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">Frequency</label>
          <div class="control">
            <input
              class="input"
              id="inputFeatFreq"
              type="text"
              maxlength="290"
            />
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">Cost</label>
          <div class="control">
            <input
              class="input"
              id="inputFeatCost"
              type="text"
              maxlength="290"
            />
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">Trigger</label>
          <div class="control">
            <input
              class="input"
              id="inputFeatTrigger"
              type="text"
              maxlength="290"
            />
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">
            Description
            <a href="/wsc_docs/#description_fields" target="_blank"><span
                class="icon is-small has-text-info has-tooltip-top"
                data-tooltip="WSC Docs"
              ><i class="fas fa-book"></i></span></a>
          </label>
          <div class="control">
            <textarea
              class="textarea"
              id="inputFeatDesc"
              placeholder=""
            ></textarea>
          </div>
        </div>

        <div class="tile is-child field">
          <label class="label">
            Special
            <a href="/wsc_docs/#description_fields" target="_blank"><span
                class="icon is-small has-text-info has-tooltip-top"
                data-tooltip="WSC Docs"
              ><i class="fas fa-book"></i></span></a>
          </label>
          <div class="control">
            <input
              class="input"
              id="inputFeatSpecial"
              type="text"
              maxlength="590"
            />
          </div>
        </div>

        <div id="sectionSelectMultiple" class="tile is-child field pt-1">
          <label class="checkbox">
            <input type="checkbox" id="inputFeatSelectMultiple" value="1" />
            <strong>Can Choose Multiple Times</strong>
          </label>
        </div>

        <div class="tile is-child field pos-relative">
          <label class="label">
            Code
            <a href="/wsc_docs/#code_basics" target="_blank"><span
                class="icon is-small has-text-info has-tooltip-top"
                data-tooltip="WSC Docs"
              ><i class="fas fa-book"></i></span></a>
            <span class="code-block-statement-display">Builder & Sheet
              Statements</span>
          </label>
          <div class="control">
            <textarea
              id="inputFeatCode"
              class="textarea nanum-coding use-custom-scrollbar"
              rows="1"
              spellcheck="false"
              maxlength="4990"
            ></textarea>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="field is-grouped is-grouped-centered pb-2">
  <div class="control">
    {{#if featID}}
      <button
        id="updateButton"
        onClick="canLeavePage()"
        class="button is-rounded is-success"
      >Save</button>
    {{else}}
      <button
        id="createButton"
        onClick="canLeavePage()"
        class="button is-rounded is-success"
      >Save</button>
    {{/if}}
  </div>
</div>